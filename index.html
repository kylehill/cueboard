<!DOCTYPE html>
<html>
<head>
  <title>Cueboard Display Plugin</title>
  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="dist/css/cueboard.css" />
</head>
<body>

  <div class="js-cueboard-container"></div>

  <script src="libs/zepto/zepto.min.js"></script>
  <script src="dist/js/cueboard.js"></script>
  <script>
    var cb = cueboard(".js-cueboard-container")

    var getKey = function(keyboardEvent) {
      var prefix = ""

      if (keyboardEvent.location) {
        if (keyboardEvent.location === 1) {
          prefix = "Left-"
        }
        if (keyboardEvent.location === 2) {
          prefix = "Right-"
        }
      }

      // Firefox
      if (keyboardEvent.key) {
        return prefix + keyboardEvent.key
      }

      // Chrome
      if (keyboardEvent.keyIdentifier) {
        // Is this a special key?
        if (keyboardEvent.keyIdentifier.substr(0,2) !== "U+") {
          return prefix + keyboardEvent.keyIdentifier
        }
      }

      if (keyboardEvent.keyCode) {
        if (keyboardEvent.keyCode >= 32) {
          return keyboardEvent.keyCode
        }
        
        return keyboardEvent.keyIdentifier
      }

    }

    $("body").on("keydown", function(keyboardEvent){
      var keyName = getKey(keyboardEvent)
      cb.changeState("active", keyName)

      if (keyboardEvent.altKey || keyboardEvent.ctrlKey || keyboardEvent.metaKey) {
        return
      }
      return false
    })

    $("body").on("keyup", function(keyboardEvent){
      var keyName = getKey(keyboardEvent)
      cb.changeState("inactive", keyName)
      
      if (keyboardEvent.altKey || keyboardEvent.ctrlKey || keyboardEvent.metaKey) {
        return
      }
      return false
    })

    

  </script>

</body>
</html>